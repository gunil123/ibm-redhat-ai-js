<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css");
      /* 체크박스를 클릭하면 할 일에 취소선만들기(체크박스 선택하면 check라는 클랙스 생성함(toggle)*/
      .checked{
        text-decoration : line-through;
        background-color: pink;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <h2>To Do List</h2>
      <input type="text" id="in" placeholder="할 일 입력해라" />
      <div id="list"><!--할일 목록 띄울 위치--></div>
    </div>
    <script>
      //list, in 객체추출
      let lists = document.getElementById("list");
      let ins = document.getElementById("in");

      const KEY_ENTER = 13; //enter의 keycode값

      ins.addEventListener("keypress", function (e) {
        if (e.keyCode === KEY_ENTER) {
          insertTodo();
          ins.value = ""; //엔터 입력 후 입력창은 공백
        }
      });
      function insertTodo() {
        //div 태그 생성
        let todoDiv = document.createElement("div");

        todoDiv.innerHTML = `${ins.value} <input type="checkbox" id="che"/>
        <i class="bi bi-trash"></i>`;

        lists.appendChild(todoDiv);
        //div 태그 생성후 lists 의 자식으로 덧붙인다
      }

      lists.addEventListener('click', function(e){
        if(e.target.classList.contains('bi-trash')){ //쓰레기통 아이콘 클릭했으면
            let parent=e.target.parentElement; //그 아이콘의 부모 div(할 일 한 줄)을 삭제
            parent.remove();
        }
      })
        // e.target은 실제로 클릭된 HTML 요소
      lists.addEventListener('change',function(e){
        if(e.target.id === 'che'){//체크박스에 체크하면 true
        let parent=e.target.parentElement;  //체크박스의 부모 div (할 일 한 줄)
        parent.classList.toggle('checked'); //checked라는 클래스명을 삽입/삭제 (있으면 제거,없으면 추가)
        }
    })
    </script>
  </body>
</html>
